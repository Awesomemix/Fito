<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
   
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="src/css/scrolling-nav.css" rel="stylesheet">
<script type="text/javascript">
    if (typeof web3 !== 'undefined') {
        web3 = new Web3(web3.currentProvider);
    } else {
        // set the provider you want from Web3.providers
        web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7545"));
    }
    if (web3.isConnected()) {
        console.log("connected");
    } else {
        console.log("not connected")
    }
    //abi는 수정될것 address도 수정될 것이다.
    var abi = GeneralMeeting_build.abi;
    // var contractAddress = "0xa8a4665904d6909b3ca5d43238d59ef3cba6e17d";
    var contractAddress = "0x9a8466ef05f424b31e5f00c0541817565aa984f7";
    console.log('abi', abi);
    var Fito = web3.eth.contract(abi).at(contractAddress);
    document.getElementId("num").innerText=Fito.getIssuedShares();
  </script>
  </head>

<!-- <body class="container" style="padding-top: 3%;" onload="getListInfo();">
 -->  
 <body class="container" style="padding-top: 3%;" >
<div class="container">
    <div class="col-lg-8 mx-auto">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          내 거래 내역
        </div>
      </div>
      <br>
      <button id="searchBlock" class="btn btn-outline-success"onClick="Add();">     조회     </button>
      <br>
      <br>
        <table class="table" id="insertTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">주소</th>
              <th scope="col">현재 보유하고 있는 주식 수</th>
            </tr>
          </thead>
          <tbody id="Tbody">
            
          </tbody>
  </table>
  </div>
</div>
<script type="text/javascript">
  function Add() {

        var my_tbody = document.getElementById('Tbody');
        // var row = my_tbody.insertRow(0); // 상단에 추가
        var len =FitoContract.getLengthOftradingDatas();
        for (i =0;i<len;++i){
          var name=FitoContract.getAddrOfshareOwner();
          var num_TK=FitoContract.getOwnedShares();
          var row = my_tbody.insertRow( my_tbody.rows.length ); // 하단에 추가
          var cell1 = row.insertCell(0);
          var cell2 = row.insertCell(1);
          var cell3 = row.insertCell(2);
          cell1.innerHTML = i;
          cell2.innerHTML = name;
          cell3.innerHTML = num_TK;

        }
    }


    var num =vc.getIssuedShares();
    document.getElementId("num").innerText(num);

</script>
<!--   <div id="response" style="padding: 20px; border: 1px solid #F1F1F1;"></div> 이부분이 뭔지 몰라서 완전히 지우지는 않음.
 --></body>

</html>